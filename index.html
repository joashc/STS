<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8"/>
	<title>Sequential Trial Simulator</title>

	<link href="bootstrap.css" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script type="text/javascript" src="ramda.min.js"></script>
	<script type="text/javascript" src="bin/webScript.js"></script>
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="jstat.min.js"></script>
	<script src="ramda.min.js"></script>
	<script src="stage.js"></script>
	<script src="sts.js"></script>
</head>

<body>
	<div class="jumbotron">
		<h1>Sequential Trial Simulator</h1>
		<p>A tool for simulating drug trials.</p>
	</div>
	
	<div class="container-fluid">
		<div class="row-fluid">
			<div class="col-sm-2" id="input">
				<!-- Parameters etc. -->
				<h2>Parameters</h2>
				<!-- TODO: uses lists -->
				<ul class="list-unstyled">
					<li><h3>Stages</h3>
						<!-- TODO: min/max vals -->
						<input type="number" id='stageNum' name="stageNum" value="1" min="1" max="100">
					</li>

					<li><h3>No. individuals</h3>
						<input type="number" min="0">
					</li>

					<li><h3>Rule</h3>
						<!-- TODO: tooltips for how to use Rule -->
						How many need to pass before moving on?<br>
						<input type="number">
					</li>
				</ul>
					<button id="addStage">Add</button>
			</div>

		<div class="col-sm-10" id="trialString">
				<h2>Trial string</h2>
				<ul id="trialSim" class="list-inline"></ul>
				<button id="start">Start</button>
		</div>
		

		<!-- Output graphs div -->
		<div class="row-fluid">
			<div class="col-sm-10" id="output">
				<h2>Output graphs</h2>

				<div class="col-sm-5" id="area1">
			                <svg id="visualisation" width="400" height="270"></svg>
 		<script>
 			var data = [{
			    "sale": "202",
			    "year": "2000"
			}, {
			    "sale": "215",
			    "year": "2001"
			}, {
			    "sale": "179",
			    "year": "2002"
			}, {
			    "sale": "199",
			    "year": "2003"
			}, {
			    "sale": "134",
			    "year": "2003"
			}, {
			    "sale": "176",
			    "year": "2010"
			}];

			var vis = d3.select("#visualisation"),
			    WIDTH = 400,
			    HEIGHT = 270,
			    MARGINS = {
			        top: 20,
			        right: 20,
			        bottom: 20,
			        left: 50
			    },

		    xScale = d3.scale.linear().range([MARGINS.left, WIDTH - MARGINS.right]).domain([2000,2010]),
		    yScale = d3.scale.linear().range([HEIGHT - MARGINS.top, MARGINS.bottom]).domain([134,215]),

		    xAxis = d3.svg.axis()
			    .scale(xScale),
			  
			yAxis = d3.svg.axis()
			    .scale(yScale)
    			.orient("left");

		    vis.append("svg:g")
			    .attr("transform", "translate(0," + (HEIGHT - MARGINS.bottom) + ")")
			    .call(xAxis);
		    vis.append("svg:g")
			    .attr("transform", "translate(" + (MARGINS.left) + ",0)")
			    .call(yAxis);

		    var lineGen = d3.svg.line()
				.x(function(d) {
				return xScale(d.year);
				})
				.y(function(d) {
				return yScale(d.sale);
				});

			vis.append('svg:path')
			  .attr('d', lineGen(data));

			var lineGen = d3.svg.line()
			    .x(function(d) {
			        return xScale(d.year);
			    })
			    .y(function(d) {
			        return yScale(d.sale);
			    })
			    .interpolate("basis");
 		</script>
				<div class="col-sm-5" id="area2">
				</div>
			</div>
		</div>
	</div>

	<footer>
		<div class="container">
	    	<p>STS for Health Hack 2015. &copy; 2015</p>
	    	<p>
		    	<a href="#">Back to top</a>
	    	</p>
	    </div>
    </footer>
</body>
</html>
